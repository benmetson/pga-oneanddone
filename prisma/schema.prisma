generator client { provider = "prisma-client-js" }
datasource db { provider = "postgresql"; url = env("DATABASE_URL") }

model User { id String @id @default(uuid()) email String @unique displayName String? avatarUrl String? createdAt DateTime @default(now()) picks Pick[] winnings WinningsCache[] }
model Season { id String @id @default(uuid()) year Int @unique isActive Boolean @default(true) tournaments Tournament[] winnings WinningsCache[] }
model Tournament { id String @id @default(uuid()) seasonId String name String course String? city String? state String? startDate DateTime endDate DateTime purse BigInt status String @default("upcoming") pickLockAt DateTime leaderboardUrl String? season Season @relation(fields:[seasonId], references:[id]) fields Field[] picks Pick[] results Result[] }
model Golfer { id String @id @default(uuid()) fullName String pgatourId String? @unique fields Field[] results Result[] picks Pick[] }
model Field { tournamentId String golferId String isWithdrawn Boolean @default(false) tournament Tournament @relation(fields:[tournamentId], references:[id]) golfer Golfer @relation(fields:[golferId], references:[id]) @@id([tournamentId, golferId]) }
model Pick { id String @id @default(uuid()) userId String tournamentId String golferId String createdAt DateTime @default(now()) user User @relation(fields:[userId], references:[id]) tournament Tournament @relation(fields:[tournamentId], references:[id]) golfer Golfer @relation(fields:[golferId], references:[id]) @@unique([userId, tournamentId]) }
model Result { tournamentId String golferId String finishingPos String? earnings BigInt @default(0) tournament Tournament @relation(fields:[tournamentId], references:[id]) golfer Golfer @relation(fields:[golferId], references:[id]) @@id([tournamentId, golferId]) }
model WinningsCache { userId String seasonId String total BigInt @default(0) updatedAt DateTime @default(now()) user User @relation(fields:[userId], references:[id]) season Season @relation(fields:[seasonId], references:[id]) @@id([userId, seasonId]) }
